<Page
    x:Class="CryptoTracker.Portfolio"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls"
    xmlns:telerik="using:Telerik.UI.Xaml.Controls.Chart"
    NavigationCacheMode="Enabled"
    mc:Ignorable="d">

    <Page.Resources>
        <Style x:Key="dataGrid_HeaderStyle" TargetType="ContentControl">
            <Setter Property="FontWeight" Value="SemiLight" />
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ContentControl">
                        <ContentPresenter Content="{TemplateBinding Content}"
                            ContentTemplate="{TemplateBinding ContentTemplate}"
                            Margin="1 0" Background="#3F3F3F" 
                            ContentTransitions="{TemplateBinding ContentTransitions}"
                            HorizontalContentAlignment="Center"
                            VerticalContentAlignment="Center"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>

    <Grid x:Name="MainGrid">

        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- 
        ############################################################################################################### -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="15">
            <ComboBox x:Name="CryptoComboBox" PlaceholderText="Coin" Header="Crypto"/>

            <TextBox 
                x:Name="cryptoQtyTextBox" Header="Amount"
                Margin="5, 0" PlaceholderText="0.2718" Width="70"/>
            <TextBox 
                x:Name="investedQtyTextBox" Header="Invested"
                Margin="5, 0" PlaceholderText="27" Width="70"/>
            
            <Button Click="AddButton_Click" VerticalAlignment="Bottom" 
                Margin="5, 0" 
                Background="#3F3F3F" 
                Foreground="White">
                <SymbolIcon Symbol="Add"/>
            </Button>
            <Button Click="RemovePortfolio_Click" VerticalAlignment="Bottom" 
                Background="#3F3F3F" 
                Foreground="White">
                <SymbolIcon Symbol="Delete"/>
            </Button>
        </StackPanel>

        
        <!-- 
        ###############################################################################################################
        ###############################################################################################################
        ############################################################################################################### -->
        <controls:DataGrid x:Name="dataGridd" Grid.Row="1" Margin="12" ColumnHeaderStyle="{ThemeResource dataGrid_HeaderStyle}"
            VerticalAlignment="Top" HorizontalAlignment="Stretch" 
            AlternatingRowBackground="Transparent"
            AutoGenerateColumns="False"
            CanUserSortColumns="False" CanUserReorderColumns="False" CanUserResizeColumns="False"
            GridLinesVisibility="Horizontal" HeadersVisibility="Column"            
            RowDetailsVisibilityMode="VisibleWhenSelected" SelectionMode="Extended">
            <controls:DataGrid.Columns>
                <controls:DataGridTemplateColumn Header="Crypto" Width="*">
                    <controls:DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Grid VerticalAlignment="Center" HorizontalAlignment="Stretch">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock VerticalAlignment="Center" HorizontalAlignment="Right">
                                    <Run Text="{Binding CryptoQty}"/>
                                    <Run Text="{Binding Crypto}"/>
                                </TextBlock>

                                <Image Grid.Column="1" Width="30" Margin="10 0" Source="{Binding CryptoLogo}"/>
                            </Grid>
                        </DataTemplate>
                    </controls:DataGridTemplateColumn.CellTemplate>
                </controls:DataGridTemplateColumn>

                <controls:DataGridTemplateColumn Header="Invested" Width="*">
                    <controls:DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                                <TextBlock Text="{Binding InvestedQty}"/>
                                <TextBlock Text="{Binding c}"/>
                            </StackPanel>
                        </DataTemplate>
                    </controls:DataGridTemplateColumn.CellTemplate>
                </controls:DataGridTemplateColumn>

                <controls:DataGridTemplateColumn Header="Bought at" Width="*">
                    <controls:DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                                <TextBlock Text="{Binding BoughtAt}"/>
                                <TextBlock Text="{Binding c}"/>
                            </StackPanel>
                        </DataTemplate>
                    </controls:DataGridTemplateColumn.CellTemplate>
                </controls:DataGridTemplateColumn>

                <controls:DataGridTemplateColumn Header="Currently" Width="*">
                    <controls:DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                                <TextBlock Text="{Binding arrow}"   Foreground="{Binding ProfitFG, Mode=TwoWay}"/>
                                <TextBlock Text="{Binding Current}" Foreground="{Binding ProfitFG, Mode=TwoWay}"/>
                                <TextBlock Text="{Binding c}"       Foreground="{Binding ProfitFG, Mode=TwoWay}"/>
                            </StackPanel>
                        </DataTemplate>
                    </controls:DataGridTemplateColumn.CellTemplate>
                </controls:DataGridTemplateColumn>

                <!--<controls:DataGridTemplateColumn Header="Profit" Width="*">
                    <controls:DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                                <TextBlock Text="{Binding Profit}"/>
                                <TextBlock Text="{Binding c}"/>
                            </StackPanel>
                        </DataTemplate>
                    </controls:DataGridTemplateColumn.CellTemplate>
                </controls:DataGridTemplateColumn>-->
                
            </controls:DataGrid.Columns>

            <controls:DataGrid.RowDetailsTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="auto"/>
                            <ColumnDefinition Width="auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- Row 1 -->
                        <TextBlock Grid.Row="0" Grid.Column="0" Style="{StaticResource ListViewTextBlock}" FontWeight="Medium" Margin="10, 0" Text="Buy price: " HorizontalAlignment="Left"/>
                        <TextBlock Grid.Row="0" Grid.Column="1" Style="{StaticResource ListViewTextBlock}" FontWeight="Light" HorizontalAlignment="Right">
                            <Run Text="{Binding BoughtAt, Mode=OneWay}"/>
                            <Run Text="{Binding c, Mode=OneWay}"/>
                        </TextBlock>

                        <!-- Row 2 -->
                        <TextBlock Grid.Row="1" Grid.Column="0" Style="{StaticResource ListViewTextBlock}" FontWeight="Medium" Margin="10, 0" Text="Worth: " HorizontalAlignment="Left"/>
                        <TextBlock Grid.Row="1" Grid.Column="1" Style="{StaticResource ListViewTextBlock}" Foreground="{Binding ProfitFG, Mode=OneWay}" FontWeight="Light" HorizontalAlignment="Right">
                            <Run Text="{Binding arrow, Mode=OneWay}"/>
                            <Run Text="{Binding Current, Mode=OneWay}"/>
                            <Run Text="{Binding c, Mode=OneWay}"/>
                        </TextBlock>

                        <!-- Row 3 -->
                        <TextBlock Grid.Row="2" Grid.Column="0" Style="{StaticResource ListViewTextBlock}" FontWeight="Medium" Margin="10, 0" Text="Date: " HorizontalAlignment="Left"/>
                        <CalendarDatePicker Grid.Row="2" Grid.Column="1" PlaceholderText="1/1/2018"/>
                    </Grid>
                </DataTemplate>
            </controls:DataGrid.RowDetailsTemplate>
        </controls:DataGrid>

        <!-- 
        ############################################################################################################### -->
        <telerik:RadPieChart Grid.Row="4" x:Name="portfolioPieChart" PaletteName="DefaultDark" Visibility="Collapsed">
            <telerik:PieSeries ShowLabels="True">
                <telerik:PieSeries.ValueBinding>
                    <telerik:PropertyNameDataPointBinding PropertyName="Value"/>
                </telerik:PieSeries.ValueBinding>
            </telerik:PieSeries>
        </telerik:RadPieChart>
        
        
    </Grid>

</Page>
